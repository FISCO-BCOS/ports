vcpkg_from_github(
    OUT_SOURCE_PATH SOURCE_PATH
    REPO WeBankBlockchain/WeDPR-Lab-Crypto
    REF 5b2583ed866d0bec8e25b8173fe14f8640a61475
    SHA512 33152922d5a23294ed25e03eab58a2d816e686e3d935ed9d42a25b8a253fc898db3eca4f8438fea06e08a0d4ab792133d05d3930e7037cddf45f793232bd240b
    HEAD_REF master
)

set(VCPKG_POLICY_SKIP_ARCHITECTURE_CHECK enabled)
set(VCPKG_POLICY_SKIP_DUMPBIN_CHECKS enabled)

find_program(CARGO_BIN NAMES cargo REQUIRED PATHS "$ENV{USERPROFILE}\\.cargo\\bin")
message(STATUS "CARGO BIN: ${CARGO_BIN}")

vcpkg_cmake_configure(
    SOURCE_PATH "${CMAKE_CURRENT_LIST_DIR}"
    OPTIONS -DSOURCE_PATH=${SOURCE_PATH} -DCARGO_BIN=${CARGO_BIN}
)

vcpkg_cmake_build()
vcpkg_cmake_install()

file(REMOVE_RECURSE "${CURRENT_PACKAGES_DIR}/debug/share")
file(REMOVE_RECURSE "${CURRENT_PACKAGES_DIR}/debug/include")
file(INSTALL "${SOURCE_PATH}/LICENSE" DESTINATION "${CURRENT_PACKAGES_DIR}/share/${PORT}" RENAME copyright)